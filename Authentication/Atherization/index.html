<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentication and Authorization Website</title>
    <style>
        body{
            font-family: Arial, Helvetica, sans-serif;
            text-align: center;
        }
        .hidden{
            /* elemets are not visible */
            display: none; 
        }
    </style>
</head>

<body>
    <h3>Authentication and Authorization</h3>
    <!-- sign up  -->
     <div id="signup-container">
        <h3>Sign Up</h3>
        <input type="email" id="signup-email" placeholder="Enter the Email">
        <input type="password" id="signup-password" placeholder="Enter the Password">
        <button id="signup-btn">Sign Up</button>
        <p id="signup-message"></p>
     </div>

     <!-- login  -->
     <div id="login-container">
        <h3>Login</h3>
        <input type="email" id="login-email" placeholder="Enter the Email">
        <input type="password" id="login-password" placeholder="Enter the Password">
        <button id="login-btn">Login</button>
        <p id="login-message"></p>
     </div>
     <!-- Log out  -->
      <div id="logout-container">
        <h3>Welcome , <span id="email-span"></span></h3>
        <button id="logout-btn">Logout</button>
      </div>





    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";
        // importing some functions 
        import { getAuth,signInWithEmailAndPassword,onAuthStateChanged,createUserWithEmailAndPassword, signOut } 
        from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyDx4KcR6yq_4bPk1JcFB_0BDzaVvA8Z27s",
          authDomain: "authentication-authoriza-da4b8.firebaseapp.com",
          projectId: "authentication-authoriza-da4b8",
          storageBucket: "authentication-authoriza-da4b8.firebasestorage.app",
          messagingSenderId: "13675920582",
          appId: "1:13675920582:web:e12defba78e2ea28b22bc7",
          measurementId: "G-YZDGD6QYTF"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth  = getAuth(app) 

        // sign up method code 
        document.getElementById("signup-btn").addEventListener("click",()=>{
            let email = document.getElementById("signup-email").value 
            let password = document.getElementById('signup-password').value

            // creating user 
            document.getElementById("signup-message").innerText = ""
            createUserWithEmailAndPassword(auth,email,password)
            .then((res)=>{ // res = user details
                // console.log(res)
                document.getElementById("signup-message").innerText="Signup Successfull"
                
            })
            .catch((error)=>{
                document.getElementById("signup-message").innerText=error.message
            })
        })
        // logout code
        document.getElementById("logout-btn").addEventListener("click",()=>{
            signOut(auth)
            .then((res)=>{
                alert("Logged Out Successfully....")
                document.getElementById("signup-email").value  = ""
                document.getElementById("signup-password").value  = ""
            })
            .catch((error)=>{
                alert(error.message)  
            })
        })
        // automaatically previous signup data // sign in data
        onAuthStateChanged(auth,(user)=>{
            // console.log(user)
            if(user){
                document.getElementById("email-span").innerText = user.email 
                document.getElementById("signup-container").classList.add("hidden")
                document.getElementById("login-container").classList.add("hidden")
                document.getElementById("logout-container").classList.remove("hidden")
            }
            else{
                document.getElementById("signup-container").classList.remove("hidden")
                document.getElementById("login-container").classList.remove("hidden")
                document.getElementById("logout-container").classList.add("hidden")
            }
        })
        // login code
        document.getElementById("login-btn").addEventListener("click",()=>{
            let email = document.getElementById("login-email").value
            let password = document.getElementById("login-password").value
            signInWithEmailAndPassword(auth,email,password)
            .then((res)=>{
                alert("Logged in successfully")
                document.getElementById("login-email").value  = ""
                document.getElementById("login-password").value  = ""
            })
            .catch((error)=>{
                alert(error.message)
            })
        })
      </script>
</body>
</html>